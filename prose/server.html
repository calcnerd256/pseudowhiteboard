<html>
 <head>
  <title>webserver</title>
 </head>
 <body>
  <h1>
   <a href="../index.html">Pseudowhiteboard</a>
  </h1>
  <h2>
   <a href="./browserbased.html">browser-based</a>
  </h2>
  <p>
   The browser gets its
   <a href="./client.html">client-side code</a>
   from a webserver.
  </p>
  <h3>server</h3>
  <h4>static client code</h4>
  <p>
   The browser-based clients depend upon the webserver
    to supply their application source code.
  </p>
  <p>
   The server needs to be able to serve up static files.
  </p>
  <p>
   Currently, it can serve up static
    <abbr title="HyperText Markup Language">HTML</abbr>,
    but no other
    <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>type.
  </p>
  <h4>plugin-based architecture</h4>
  <p>I plan to evolve the design into a framework with plug-ins.</p>
  <h4>chat-ops as a database</h4>
  <p>
   Communication between clients looks like like an IRC chatroom.
  </p>
  <p>
   Handles are integer pseudonyms, automatically incrementing, zero-indexed.
   They are assigned on a first-come, first-served basis when users speak.
  </p>
  <p>
   For the
    <abbr title="minimum viable product">MVP</abbr>,
    the only supported operations are
     appending to the chatroom and
     reading the room's entire log.
  <p>
  <p>
   Because the log uses linebreaks as delimiters,
    newlines are stripped out of the database records.
  </p>
  <p>
   The database does not persist.
   Terminating the server forgets the history.
  </p>
  <p>
   There is no import mechanism at this time.
  </p>
  <h3>server software</h3>
  <p>
   The webserver is written in
    <a href="https://nodejs.org/en/">nodeJS</a>.
  </p>
  <p>
   For some reason, I'm running version
    <a href="https://nodejs.org/docs/v0.10.25/api/">0.10.something</a>,
    even though the stable release is version 6.10.3.
   <a href="https://en.wikipedia.org/wiki/The_Fox_and_the_Grapes">Whatever</a>,
    I didn't want to use much in the way of features anyway.
  </p>
  <p>
   The source is in
   <a href="../src/serve.js">../src/</a>.
  </p>
  <h4>running</h4>
  <p>
   To run the webserver, cd into the src directory as a sudoer and run
    <pre>./serve.sh</pre>
    then visit the URL it prints to stdout.
  </p>
  <p>
   I'm assuming you know how to install NodeJS.
   If you don't,
    <a href="./contact.html">contact me</a>
    to let me know
    that this part of the documentation needs expanding.
  </p>
  <h4>TODO</h4>
  <h5>chatopsdb</h5>
  <p>
   It would be nice to persist the database, or at least import a copy.
   Pseudonyms make import nontrivial.
  </p>
  <p>
   Consider unit-indexing user IDs so that zero can be reserved for the system.
  </p>
 </body>
</html>
